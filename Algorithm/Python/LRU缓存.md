# LRU Cache

LRU即**Least Recently Used**, 近期最少使用, 如名字, 作为一种缓存, 在容量受限的情况下, 会优先淘汰最少使用的对象.

在Python中, 位置在`functools.lru_cache`, 是一个**修饰器**, 用户对需要缓存结果的函数在定义时, 进行修饰. 在运行中, 作为一个代替`redis`的轻缓存, 以函数的入参为`key`, 以该入参运行得到的结果为`value`, 进行缓存. 调用此函数时, 如果入参在缓存中, 则直接返回结果, 不再调用函数, 大大加速了运行效率.

根据以上的特点, 可以得到, 想使用`lru_cache`, 必须满足:

- 入参必须是**不可变参数**, 如`int`, `str`, `tuple`等, `list`, `dict`等是无法使用的
   - 遇到这种情况, 只能通过闭包的方法解决
- 函数的映射关系是固定的, 即对于同一个输入, 输出必须是固定不变的. 对于一些有状态的函数可能无法使用

# 原理

`functools.lru_cache`是通过**一个双向链表**外加**一个字典**实现缓存的.

- 字典的作用是在$$O(1)$$的时间内找到结果
- 双向链表的作用是在$$O(1)$$的时间内删除掉最少使用的key

## 源码

# 参考资料

- [Python 实现LRU Cache](https://www.cnblogs.com/dion-90/articles/8540787.html)
- [python 刷题小技巧之 lru_cache](https://zhuanlan.zhihu.com/p/79544192)
